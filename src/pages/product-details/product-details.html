<!--
  Generated template for the ProductDetails page.

  See http://ionicframework.com/docs/v2/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-navbar color="primary" >
    <ion-title>{{ 'Product' | translate }}</ion-title>
    <ion-buttons *ngIf="org=='carttab'" end>
      <button ion-button (click)="closeModal()">
        <ion-icon name="ios-close-circle-outline"></ion-icon>
        </button>
    </ion-buttons>
  </ion-navbar>
</ion-header>
<ion-content>
  <div *ngIf="product">
    <ion-slides *ngIf="selVariation==null" pager autoplay="3000" loop>
      <ion-slide *ngFor="let img of slideImages">
        <img src="{{img.src}}" />
      </ion-slide>
    </ion-slides>
    <ion-row *ngIf="selVariation!=null" class="top-img">
      <img src="{{variationImg}}" />
    </ion-row>
    <div padding>
      <h3 class="title">{{product.name}}</h3>
      <div>
    <div [innerHTML]="product.price_html"></div>
        <del ng-show="product.regular_price > 0 && product.on_sale"></del>
        <span class="pull-right" (click)="share()">
	        		<ion-icon name="share" color="primary"></ion-icon> <b color="primary">Compartir</b>
	        	</span>
      </div>
    </div>
    <!-- Descripcion del producto -->
    <ion-list *ngIf="product.description.length > 0">
      <ion-list-header class="item-header">
         {{ 'PRODUCT_DESCRIPTION' | translate }}
      </ion-list-header>
      <ion-item [innerHTML]="product.description" class="desc"></ion-item>
    </ion-list>
    <!-- Atributos del producto -->
    <ion-list *ngIf="product.attributes.length>0">
      <ion-list-header class="item-header">
        {{ 'PRODUCT_Attributes' | translate }}
        
      </ion-list-header>
      <button ion-item *ngFor="let attribute of product.attributes;" (click)="attributeSelected(attribute)">
        {{attribute.name}}<span item-right>{{getSelectedOption(attribute.name)}}</span>
      </button>
    </ion-list>
    <!-- Si es un pack, mostramos los productos que contienen el pack -->
    <ion-list *ngIf="product.bundled_items.length>0">
      <ion-list-header  class="item-header">
         Contenido de la suscripci√≥n
      </ion-list-header>
      <ion-item *ngFor="let item of product.bundled_items" class="desc" (click)="viewProduct(item)">
        <!-- <div *ngFor="let image of item.images">
          <img src="{{image.src}}" />
        </div> -->
        {{ item.name}}
        <span class="pull-right">
          <b #currencyFormat [innerHTML]="appConfig.Shop_Currency_format"></b> <b>{{item.price}} </b>
        </span>
      </ion-item>
    </ion-list>

  </div>
</ion-content>
<ion-footer border-top>
  <ion-grid>
    <ion-row>
      <ion-col col-6>
        <ion-chip (click)="addWishlist()">
          <ion-icon name="heart" [color]="isFav?'primary':'dark'"></ion-icon>
        </ion-chip>
        <ion-chip margin-left (click)="goToCart()">
          <ion-icon name="cart" color="primary"></ion-icon>
          <ion-label>{{cartProductNumber}}</ion-label>
        </ion-chip>
      </ion-col>
      <ion-col col-6 class="chip-button">
        <ion-chip [ngClass]="{'chip-enable': (selVariation!=null || hasVariation!=true) && !this.inCart}" (click)="addToCartArray()">
          <ion-label>{{ 'Add_to_cart' | translate }} {{this.inCart}}</ion-label>
        </ion-chip>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-footer>
